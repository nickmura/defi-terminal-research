# Algebraic Model of DeFi Actions (draft)

We define an algebraic system where **commands** are grouped by their functional scope:  
**core**, **global**, and **protocol-specific** (plugin-based).

---

## Command Generators

$$
G = G_{\text{core}} \cup G_{\text{global}} \cup G_{\text{protocols}}
$$

Where:

- \( G_{\text{core}} \): primitives available in every context (e.g. `transfer`, `balance`, `rpc`, `faucet`)  
- \( G_{\text{global}} \): alias or global generators (verbs that aggregate across protocols, e.g. `swap`, `bridge`)  
- \( G_{\text{protocols}} = \bigcup_P G_P \): union of all protocol-specific generators, one fiber per protocol.

---

## Global Monoid

The **global action space** is generated by all command sets:

$$
M = \langle G \rangle = \langle G_{\text{core}} \cup G_{\text{global}} \cup G_{\text{protocols}} \rangle
$$

Each protocol \( P \) defines its own **internal monoid**:

$$
M_P = \langle G_P \rangle \subset M
$$

The **set of all protocols** is:

$$
\mathsf{Protocols} = \{ \text{@core}, \text{@wormhole}, \text{@lifi}, \text{@uniswap-v4}, \text{@aave-v3}, \text{@hyperlane}, \dots \}
$$

---

## Structural Relationships

$$
G_{\text{global}} = G_{\text{core}} \cup \bigcup_P G_P
$$

### Notes

- Alias/global generators (\( G_{\text{alias}} \)) correspond to *shared verbs* across multiple protocols.  
- Core generators (\( G_{\text{core}} \)) are **independent** of protocols.  
- Each \( G_P \) is a **local generator set**, defining its own internal algebra of operations.

---

## Projections and Sections

$$
\pi : M \to \mathsf{Protocols}, \quad
\sigma : \mathsf{Protocols} \to M, \quad
\pi(\sigma(P)) = P
$$

- \( \pi \): **throws** (projects) a command back to its protocol namespace.  
- \( \sigma \): **lifts** (enters) the protocolâ€™s command fiber.  
- Together, they satisfy the **section property**, ensuring structural consistency:
  \[
  \pi \circ \sigma = \text{id}_{\mathsf{Protocols}}.
  \]

---

## Alias Resolution

The **alias resolver** maps generic verbs and protocols to concrete commands:

$$
\rho(g, P) = g_P
$$

and equivalently:

$$
\rho(g, P) = \sigma(P)(g)
$$

This defines the operational mechanism that turns:

```bash
swap 100 usdc eth --protocol uniswap-v4
